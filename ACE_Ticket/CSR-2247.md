# 获取ticket列表
## request:
```shell
curl --location --request POST 'https://unisticket.item.com/api/item-tickets/v1/iam/tickets/page' \
--header 'x-api-key: 5a20d885-455d-4801-9e31-1e9196c13367' \
--header 'Content-Type: application/json' \
--data-raw '{
    "size": 10, // 每页数量
    "page": 1, // 页码
    "input": {
        "displayStatusIds": [ // 状态过滤
            2 // 已解决
        ],
        "staffIds": [ // Ticket负责人过滤
            "91" // 员工ID, Celine Escorido
        ]
    }
}'
```

## response:
```json
{
    "code": 200, 
    "msg": "success",
    "data": {
        "total": 637, // 总数量
        "size": 10, // 每页数量
        "current": 1, // 当前页码
        "records": [
            {
                "createTime": "24/02/2025 21:22:17",
                "updateTime": "01/09/2025 07:17:51",
                "version": 0,
                "id": "68346", // ticket id
                "ticketNumber": "920590", // ticket number
                "title": "(PU# 7157595 / Load# SM03329263) - SWEETWATER SOUND INC C/O AFS [#903348]", // ticket title
                "customerId": "11754", // Ticket所属发起人，客户ID
                "topicId": "45", // Ticket所属主题，主题ID
                "departmentId": "13", // Ticket所属部门，部门ID
                "teamId": "26", // Ticket所属团队，团队ID
                "staffId": "91", // Ticket负责人，员工ID
                "emailId": "20", // Ticket所属邮箱，邮箱ID
                "slaId": "4", // Ticket所属SLA，SLA ID
                "displayStatusId": "2", // Ticket状态，状态ID
                "displayStatusSystemStatus": 20, // Ticket状态，状态系统状态
                "priorityId": "2", // Ticket优先级，优先级ID
                "replyStatus": 2, // Ticket回复状态，回复状态
                "sourceChannel": 2, // Ticket来源渠道，来源渠道
                "estDueDate": "25/02/2025 21:22:17", // Ticket预计完成时间，预计完成时间
                "closedTime": "24/02/2025 21:32:23", // Ticket关闭时间，关闭时间
                "firstReplyTime": "24/02/2025 21:32:24", // Ticket首次回复时间，首次回复时间
                "firstClosedTime": "24/02/2025 21:32:23", // Ticket首次关闭时间，首次关闭时间
                "customerName": "Ray Edwards", // Ticket所属发起人，客户名称
                "customerEmail": "ray@strandbergguitars.com", // Ticket所属发起人，客户邮箱
                "staffName": "Celine Escorido", // Ticket负责人，员工名称
                "displayStatusName": "Solved", // Ticket状态，状态名称
                "displayStatusColor": "#2196F3", // Ticket状态，状态颜色
                "priorityName": "Medium", // Ticket优先级，优先级名称
                "priorityColor": "#FFC107", // Ticket优先级，优先级颜色
                "topicTitle": "UT CS: General Inquiry", // Ticket所属主题，主题名称
                "teamName": "UT Sweetwater", // Ticket所属团队，团队名称
                "departmentName": "UNIS Transportation", // Ticket所属部门，部门名称
                "isResponseOverdue": false, // Ticket回复是否超时，是否超时
                "isOverdue": false, // Ticket处理是否超时，是否超时
                "isSlaBreached": false // Ticket SLA是否超时，是否超时
            }
        ]
    }
}
```

# 获取ticket，消息列表

## request:

```shell
curl --location --request POST 'https://unisticket.item.com/api/item-tickets/v1/iam/tickets/68346/messages' \
--header 'x-api-key: 5a20d885-455d-4801-9e31-1e9196c13367' \
--header 'Content-Type: application/json' \
--data-raw '{
  "size": 10,
  "page": 1,
  "orders": [
    {
      "column": "id", // 排序字段
      "asc": false // 排序方向
    }
  ],
  "input": {
    "types": [ // 消息类型过滤
      1, // 邮件消息
      3, // 内部消息
      5 // 公开回复
    ]
  }
}'
```

## response:
```json
{
    "code": 200,
    "msg": "success",
    "data": {
        "total": 94,
        "size": 10,
        "current": 1,
        "records": [
            {
                "id": "179481", // 消息ID
                "ticketId": "42668", // Ticket ID
                "status": 2, // 1 新创建 2 已发送 3 发送失败
                "type": 1, // 1 消息 2 系统消息 3 内部回复 4 side对话 5 公开回复
                "sourceChannel": 2, // 消息来源渠道，1 phone 2 email 3 web 4 api 5 other 6 open form 7 chat 8 ai assistant
                "userId": "0", // 消息发送者，员工ID
                "userType": 3, // 消息发送者，员工类型, 1 客户, 2 员工, 3 系统
                "userName": "Aracely Lopez", // 消息发送者，员工名称
                "content": "<p>Hello, how can I help you today?</p>", // 消息富文本内容
                "createTime": "11/02/2025 01:26:09", // 创建时间
                "updateTime": "07/08/2025 04:25:06", // 更新时间
                "firstFlag": false // 是否当前Ticket的第一条消息
            }
        ]
    }
}
```